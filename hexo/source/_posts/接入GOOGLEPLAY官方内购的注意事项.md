---
title: 接入GOOGLEPLAY官方内购的注意事项
date: 2015-03-14 00:00:00
tags:
---
越来越多的国内开发者开始将应用发布到海外去，那么接入应用内购则是很重要的一个环节。

我从两年前开始做内购SDK，也帮助过一些团队做内购接入，遇到过各种问题，也都一一解决了。如今觉得可以将一些注意事项列出来，供大家参考。

1. 测试设备必须安装了整套的GooglePlay服务框架。

2. 设备的Google帐号必须处于登录状态。

3. Play商店的地区不能是中国大陆地区。

4. 应用后台创建内购商品需先上传apk。这个apk不用加任何内容，只需要保证包名、签名跟实际要发布的应用一致，并且添加了com.android.vending.BILLING这个权限即可。

5. 对于使用V3版API的应用来说，后台创建商品时，不再区分受管理还是不受管理，默认都是按受管理的商品来处理。所以在确认交易完成后，需要将该商品消费掉，否则用户下次再购买这个商品时会提示已拥有此商品。

6. 代码接入完成后，要上传新的apk到应用后台，并将应用改成alpha版本状态，然后创建一个Google Plus群组，把设备上登录的Google帐号加入到群租中，将该群组设置为应用的测试群组。

7. 一切设置都生效后(可能会等好几个小时)，这个测试帐号应该能在Play商店里看到应用了，下载下来，进行测试即可。

8. 测试时需要添加信用卡信息，中国大陆的信用卡好像不行（我之前添加不成功，不知有没有加成功过的）。不过可以绑定Paypal账户(香港地区商店)。

9. 在客户端验证交易内容存在风险，可以将Google回调的信息传到自己的服务器上进行验证。

10.发起支付方法里的developerPayload参数可以用来传递开发者自定义的数据。

目前先总结了这十条，如果以后再想到哪个点比较重要，会在此更新。